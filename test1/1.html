<!DOCTYPE html>
<!-- __V3D_PUZZLES__ - enable Puzzles button in the App Manager -->
<!-- __V3D_TEMPLATE__ - template-based file; delete this line to prevent this file from being updated -->
<html lang="en">
<head>
  <title>Verge3D Web Interactive</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

</head>
<body>
	
	<div id="container"></div>
	<script>

var w,h,vw,vh, canvas, canvas2, ctx, ctx2;

var container = document.getElementById("container");

	canvas = document.createElement("canvas");
	canvas.width = w;
	canvas.height = h;
	canvas.style.width = w+"px";
	canvas.style.height = h+"px";
	canvas.style.position = "absolute";
	canvas.style.top = "0px";
	canvas.style.left = "0px";
	ctx = canvas.getContext("2d");
	container.insertBefore( canvas, container.firstChild );


	video = document.createElement("video");
//	video.autoplay = "true";
    video.setAttribute('autoplay', '');
    video.setAttribute('muted', '');
    video.setAttribute('playsinline', '');
	container.insertBefore( video, container.firstChild );

	canvas2 = document.createElement("canvas");
	canvas2.style.position = "absolute";
	canvas2.style.width = "100px";
	canvas2.style.height = "100px";
	ctx2 = canvas2.getContext("2d");
	container.insertBefore( canvas2, container.firstChild );

	// video.style.position = "absolute";
	// video.style.top = "0px";
	// video.style.left = "0px";

//	container.insertBefore( video, container.firstChild );

	div = document.createElement("div");
	div.style.position = "absolute";
	div.style.width = "100px";
	div.style.height = "100px";
	div.style.top = '0px';
	div.style.left = '0px';
	div.style.backgroundColor = "white";
	container.appendChild(div);
	div.innerHTML = new Date().getHours() + ":"+new Date().getMinutes();


//	window.addEventListener('resize',resize);

	if (navigator.mediaDevices.getUserMedia) {       
		navigator.mediaDevices.getUserMedia({audio:false, video: 
			{facingMode: "environment" }
//			{facingMode: "user" }
		})
		.then(function(stream) {
			video.srcObject = stream;
			video.oncanplaythrough = function() {
				does();
			}
		})
		.catch(function(err0r) {
			console.log("Something went wrong!");
		});
	}

function does() {
	w = 300;
	h = 400;
	canvas.width = w;
	canvas.height = h;
	canvas.style.width = w+"px";
	canvas.style.height = h+"px";

	vw = video.videoWidth;
	vh = video.videoHeight;


		ctx.drawImage(video,0,0,vw,vh);

	    	ctx.lineWidth = 8;

	    	ctx.beginPath();
	    	ctx.strokeStyle = '#FF0000';
	        ctx.moveTo(100,100);
	        ctx.lineTo(300, 300);
	        ctx.stroke();

//		}

//		ctx2.drawImage(video,0,0, vw,vh);


}

	</script>
</body>